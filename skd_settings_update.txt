<?xml version="1.0" encoding="UTF-8"?>
<!-- Дополнительные варианты настроек для существующих СКД схем -->

<!-- Для СКД_Продажи - добавить вариант для расчета только итогов -->
<settingsVariant>
    <dcsset:name>РасчетИтогов</dcsset:name>
    <dcsset:presentation xsi:type="v8:LocalStringType">
        <v8:item>
            <v8:lang>ru</v8:lang>
            <v8:content>Расчет итоговых показателей продаж</v8:content>
        </v8:item>
    </dcsset:presentation>
    <dcsset:settings>
        <dcsset:selection>
            <dcsset:item xsi:type="dcsset:SelectedItemField">
                <dcsset:field>Выручка</dcsset:field>
            </dcsset:item>
            <dcsset:item xsi:type="dcsset:SelectedItemField">
                <dcsset:field>КоличествоПродаж</dcsset:field>
            </dcsset:item>
            <dcsset:item xsi:type="dcsset:SelectedItemField">
                <dcsset:field>СреднийЧек</dcsset:field>
            </dcsset:item>
        </dcsset:selection>
        <dcsset:outputParameters>
            <dcscor:item xsi:type="dcsset:SettingsParameterValue">
                <dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
                <dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
            </dcscor:item>
        </dcsset:outputParameters>
        <!-- Общие итоги без группировок для получения агрегированных значений -->
        <dcsset:item xsi:type="dcsset:StructureItemGroup">
            <dcsset:order>
                <dcsset:item xsi:type="dcsset:OrderItemAuto"/>
            </dcsset:order>
            <dcsset:selection>
                <dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
            </dcsset:selection>
        </dcsset:item>
    </dcsset:settings>
</settingsVariant>

<!-- Для СКД_Прибыльность - добавить вариант для расчета рентабельности -->
<settingsVariant>
    <dcsset:name>РасчетРентабельности</dcsset:name>
    <dcsset:presentation xsi:type="v8:LocalStringType">
        <v8:item>
            <v8:lang>ru</v8:lang>
            <v8:content>Расчет рентабельности для индикатора</v8:content>
        </v8:item>
    </dcsset:presentation>
    <dcsset:settings>
        <dcsset:selection>
            <dcsset:item xsi:type="dcsset:SelectedItemField">
                <dcsset:field>РентабельностьПродаж</dcsset:field>
            </dcsset:item>
        </dcsset:selection>
        <dcsset:outputParameters>
            <dcscor:item xsi:type="dcsset:SettingsParameterValue">
                <dcscor:parameter>ВыводитьЗаголовок</dcscor:parameter>
                <dcscor:value xsi:type="dcsset:DataCompositionTextOutputType">DontOutput</dcscor:value>
            </dcscor:item>
        </dcsset:outputParameters>
        <dcsset:item xsi:type="dcsset:StructureItemGroup">
            <dcsset:order>
                <dcsset:item xsi:type="dcsset:OrderItemAuto"/>
            </dcsset:order>
            <dcsset:selection>
                <dcsset:item xsi:type="dcsset:SelectedItemAuto"/>
            </dcsset:selection>
        </dcsset:item>
    </dcsset:settings>
</settingsVariant>

<!-- Примечание: Эти варианты настроек нужно добавить в соответствующие СКД схемы
     для корректной работы унифицированного механизма получения итогов.
     
     Ключевые моменты:
     1. Варианты настроек без группировок для получения общих итогов
     2. Отключение вывода заголовков для служебных вариантов
     3. Выбор только необходимых полей для оптимизации производительности
     
     Также убедитесь, что в основных вариантах настроек СКД правильно настроены
     totalField для автоматического расчета итогов на уровне схемы компоновки. -->
