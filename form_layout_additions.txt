<?xml version="1.0" encoding="UTF-8"?>
<!-- Дополнения к существующей разметке формы дашборда -->
<!-- Эти элементы нужно добавить в соответствующие места формы -->

<!-- 1. Добавить в группу фильтров дополнительные кнопки -->
<!-- Вставить после кнопки "Обновить" в ГруппаФильтры -->
<Button name="КнопкаСравнитьСПрошлымПериодом" id="170">
    <Type>UsualButton</Type>
    <CommandName>Form.Command.СравнитьСПрошлымПериодом</CommandName>
    <Title>
        <v8:item>
            <v8:lang>ru</v8:lang>
            <v8:content>Сравнить с прошлым годом</v8:content>
        </v8:item>
    </Title>
    <ToolTip>
        <v8:item>
            <v8:lang>ru</v8:lang>
            <v8:content>Сравнить показатели с аналогичным периодом прошлого года</v8:content>
        </v8:item>
    </ToolTip>
    <Picture>
        <xr:Ref>CommonPicture.СравнитьФайлы</xr:Ref>
        <xr:LoadTransparent>true</xr:LoadTransparent>
    </Picture>
    <Representation>Picture</Representation>
    <ExtendedTooltip name="КнопкаСравнитьСПрошлымПериодомРасширеннаяПодсказка" id="171"/>
</Button>

<Button name="КнопкаЭкспорт" id="172">
    <Type>UsualButton</Type>
    <CommandName>Form.Command.ЭкспортВExcel</CommandName>
    <Title>
        <v8:item>
            <v8:lang>ru</v8:lang>
            <v8:content>Экспорт</v8:content>
        </v8:item>
    </Title>
    <ToolTip>
        <v8:item>
            <v8:lang>ru</v8:lang>
            <v8:content>Экспортировать данные в Excel, PDF или HTML</v8:content>
        </v8:item>
    </ToolTip>
    <Picture>
        <xr:Ref>StdPicture.SaveFile</xr:Ref>
        <xr:LoadTransparent>true</xr:LoadTransparent>
    </Picture>
    <Representation>Picture</Representation>
    <ExtendedTooltip name="КнопкаЭкспортРасширеннаяПодсказка" id="173"/>
</Button>

<!-- 2. Добавить индикаторы сравнения к существующим KPI -->
<!-- Пример для индикатора выручки - добавить после основного индикатора -->
<UsualGroup name="ГруппаВыручкаСравнение" id="174">
    <Group>Horizontal</Group>
    <ShowTitle>false</ShowTitle>
    <ExtendedTooltip name="ГруппаВыручкаСравнениеРасширеннаяПодсказка" id="175"/>
    <ChildItems>
        <PictureDecoration name="СтрелкаВыручка" id="176">
            <Picture>
                <xr:Ref>CommonPicture.СостояниеЗадачиВыполнено</xr:Ref>
                <xr:LoadTransparent>true</xr:LoadTransparent>
            </Picture>
            <Width>2</Width>
            <Height>2</Height>
            <PictureSize>RealSize</PictureSize>
            <Visible>false</Visible>
            <ExtendedTooltip name="СтрелкаВыручкаРасширеннаяПодсказка" id="177"/>
        </PictureDecoration>
        <LabelDecoration name="ИзменениеВыручка" id="178">
            <Title>
                <v8:item>
                    <v8:lang>ru</v8:lang>
                    <v8:content></v8:content>
                </v8:item>
            </Title>
            <TextColor>style:SpecialTextColor</TextColor>
            <Font ref="sys:DefaultGUIFont" height="9" italic="true"/>
            <HorizontalAlign>Left</HorizontalAlign>
            <Visible>false</Visible>
            <ExtendedTooltip name="ИзменениеВыручкаРасширеннаяПодсказка" id="179"/>
        </LabelDecoration>
    </ChildItems>
</UsualGroup>

<!-- 3. Добавить группу для отображения периода сравнения -->
<!-- Вставить в начало основной области дашборда -->
<UsualGroup name="ГруппаПериодСравнения" id="180">
    <Visible>false</Visible>
    <Title>
        <v8:item>
            <v8:lang>ru</v8:lang>
            <v8:content>Сравнение периодов</v8:content>
        </v8:item>
    </Title>
    <ToolTip>
        <v8:item>
            <v8:lang>ru</v8:lang>
            <v8:content>Результаты сравнения с прошлым периодом</v8:content>
        </v8:item>
    </ToolTip>
    <Group>Horizontal</Group>
    <Representation>WeakSeparation</Representation>
    <ShowTitle>true</ShowTitle>
    <ExtendedTooltip name="ГруппаПериодСравненияРасширеннаяПодсказка" id="181"/>
    <ChildItems>
        <LabelField name="НадписьТекущийПериод" id="182">
            <DataPath>ТекущийПериодСтрока</DataPath>
            <TitleLocation>None</TitleLocation>
            <Width>30</Width>
            <HorizontalStretch>false</HorizontalStretch>
            <Font ref="sys:DefaultGUIFont" bold="true"/>
            <BorderColor>style:BorderColor</BorderColor>
            <ExtendedTooltip name="НадписьТекущийПериодРасширеннаяПодсказка" id="183"/>
        </LabelField>
        <LabelDecoration name="РазделительVS" id="184">
            <Title>
                <v8:item>
                    <v8:lang>ru</v8:lang>
                    <v8:content>vs</v8:content>
                </v8:item>
            </Title>
            <Width>5</Width>
            <HorizontalAlign>Center</HorizontalAlign>
            <Font ref="sys:DefaultGUIFont" height="10" bold="true"/>
            <TextColor>style:FieldSelectionBackColor</TextColor>
            <ExtendedTooltip name="РазделительVSРасширеннаяПодсказка" id="185"/>
        </LabelDecoration>
        <LabelField name="НадписьПрошлыйПериод" id="186">
            <DataPath>ПрошлыйПериодСтрока</DataPath>
            <TitleLocation>None</TitleLocation>
            <Width>30</Width>
            <HorizontalStretch>false</HorizontalStretch>
            <Font ref="sys:DefaultGUIFont" bold="true"/>
            <BorderColor>style:BorderColor</BorderColor>
            <ExtendedTooltip name="НадписьПрошлыйПериодРасширеннаяПодсказка" id="187"/>
        </LabelField>
        <Button name="КнопкаЗакрытьСравнение" id="188">
            <Type>UsualButton</Type>
            <Title>
                <v8:item>
                    <v8:lang>ru</v8:lang>
                    <v8:content>Закрыть сравнение</v8:content>
                </v8:item>
            </Title>
            <Width>15</Width>
            <CommandName>Form.Command.ЗакрытьСравнение</CommandName>
            <ExtendedTooltip name="КнопкаЗакрытьСравнениеРасширеннаяПодсказка" id="189"/>
        </Button>
    </ChildItems>
</UsualGroup>

<!-- 4. Команды для формы -->
<Commands>
    <!-- Существующие команды -->
    <Command name="Обновить" id="1">
        <!-- ... -->
    </Command>
    
    <!-- Новые команды -->
    <Command name="СравнитьСПрошлымПериодом" id="2">
        <Title>
            <v8:item>
                <v8:lang>ru</v8:lang>
                <v8:content>Сравнить с прошлым периодом</v8:content>
            </v8:item>
        </Title>
        <ToolTip>
            <v8:item>
                <v8:lang>ru</v8:lang>
                <v8:content>Сравнить показатели с аналогичным периодом прошлого года</v8:content>
            </v8:item>
        </ToolTip>
        <Action>СравнитьСПрошлымПериодом</Action>
    </Command>
    
    <Command name="ЭкспортВExcel" id="3">
        <Title>
            <v8:item>
                <v8:lang>ru</v8:lang>
                <v8:content>Экспорт данных</v8:content>
            </v8:item>
        </Title>
        <ToolTip>
            <v8:item>
                <v8:lang>ru</v8:lang>
                <v8:content>Экспортировать данные в Excel, PDF или HTML</v8:content>
            </v8:item>
        </ToolTip>
        <Action>ЭкспортВExcel</Action>
    </Command>
    
    <Command name="ЗакрытьСравнение" id="4">
        <Title>
            <v8:item>
                <v8:lang>ru</v8:lang>
                <v8:content>Закрыть сравнение</v8:content>
            </v8:item>
        </Title>
        <Action>ЗакрытьСравнение</Action>
    </Command>
</Commands>

<!-- 5. Атрибуты формы для поддержки сравнения -->
<Attributes>
    <!-- Существующие атрибуты... -->
    
    <!-- Новые атрибуты для сравнения -->
    <Attribute name="РежимСравнения" id="200">
        <Title>
            <v8:item>
                <v8:lang>ru</v8:lang>
                <v8:content>Режим сравнения</v8:content>
            </v8:item>
        </Title>
        <Type>
            <v8:Type>xs:boolean</v8:Type>
        </Type>
    </Attribute>
    
    <Attribute name="ТекущийПериодСтрока" id="201">
        <Title>
            <v8:item>
                <v8:lang>ru</v8:lang>
                <v8:content>Текущий период</v8:content>
            </v8:item>
        </Title>
        <Type>
            <v8:Type>xs:string</v8:Type>
            <v8:StringQualifiers>
                <v8:Length>100</v8:Length>
                <v8:AllowedLength>Variable</v8:AllowedLength>
            </v8:StringQualifiers>
        </Type>
    </Attribute>
    
    <Attribute name="ПрошлыйПериодСтрока" id="202">
        <Title>
            <v8:item>
                <v8:lang>ru</v8:lang>
                <v8:content>Прошлый период</v8:content>
            </v8:item>
        </Title>
        <Type>
            <v8:Type>xs:string</v8:Type>
            <v8:StringQualifiers>
                <v8:Length>100</v8:Length>
                <v8:AllowedLength>Variable</v8:AllowedLength>
            </v8:StringQualifiers>
        </Type>
    </Attribute>
    
    <Attribute name="ДанныеСравнения" id="203">
        <Title>
            <v8:item>
                <v8:lang>ru</v8:lang>
                <v8:content>Данные сравнения</v8:content>
            </v8:item>
        </Title>
        <Type>
            <v8:Type>v8:ValueStorage</v8:Type>
        </Type>
    </Attribute>
</Attributes>